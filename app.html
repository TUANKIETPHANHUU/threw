<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>D·ª± ƒëo√°n B·ªánh Tim - Khai ph√° D·ªØ li·ªáu</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 0;
      background: #f4f7fb;
    }
    header {
      background: linear-gradient(90deg, #023e8a, #023e8a);
      color: white;
      padding: 30px 0;
      text-align: center;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    header h1 {
      margin: 0;
      font-size: 40px;
      font-weight: bold;
    }
    header p {
      font-size: 18px;
      margin: 10px 0 0;
    }
    .main-container {
      max-width: 1200px;
      margin: 30px auto;
      padding: 20px;
    }
    .intro-section {
      background-color: #ffffff;
      padding: 40px;
      border-radius: 12px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
      margin-bottom: 30px;
    }
    .intro-section h2 {
      text-align: center;
      color: #023e8a;
      font-size: 32px;
    }
    .description {
      font-size: 18px;
      color: #555;
      line-height: 1.8;
      margin-top: 20px;
    }
    .container {
      background-color: white;
      padding: 25px;
      border-radius: 12px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
      margin-top: 40px;
    }
    .container h2 {
      text-align: center;
      color: #023e8a;
      margin-bottom: 20px;
    }
    label {
      display: block;
      margin-top: 12px;
      font-weight: bold;
    }
    input, select {
      width: 100%;
      padding: 12px;
      margin-top: 5px;
      border-radius: 8px;
      border: 1px solid #ccc;
      box-sizing: border-box;
      background-color: #f9f9f9;
      transition: background-color 0.3s ease;
    }
    input:focus, select:focus {
      background-color: #fff;
      border-color: #023e8a;
    }
    button {
      margin-top: 20px;
      width: 100%;
      padding: 14px;
      background-color: #023e8a;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 18px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    button:hover {
      background-color: #a50000;
    }
    #result {
      margin-top: 25px;
      padding: 20px;
      background: #f0f0f0;
      border-left: 8px solid #023e8a;
      border-radius: 10px;
      font-size: 18px;
      line-height: 1.6;
    }
    canvas {
      margin-top: 30px;
    }
    footer {
      background-color: #333;
      color: white;
      padding: 30px 0;
      text-align: center;
      margin-top: 50px;
      box-shadow: 0 -5px 15px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body>
  <header>
    <p>·ª®ng d·ª•ng ph√¢n t√≠ch d·ªØ li·ªáu ƒë·ªÉ d·ª± ƒëo√°n m·ª©c ƒë·ªô b·ªánh tim d·ª±a tr√™n c√°c y·∫øu t·ªë s·ª©c kh·ªèe</p>
  </header>

  <div class="main-container">
    <div class="intro-section">
      <h2>Gi·ªõi thi·ªáu v·ªÅ ·ª©ng d·ª•ng</h2>
      <p class="description">
        ƒê√¢y l√† m·ªôt ·ª©ng d·ª•ng ƒë∆∞·ª£c ph√°t tri·ªÉn trong khu√¥n kh·ªï m√¥n h·ªçc <strong>Khai ph√° D·ªØ li·ªáu</strong> d∆∞·ªõi s·ª± h∆∞·ªõng d·∫´n c·ªßa gi√°o vi√™n <strong>Nguy·ªÖn Ng·ªçc Th·ªßy</strong>. M·ª•c ti√™u c·ªßa d·ª± √°n l√† √°p d·ª•ng c√°c k·ªπ thu·∫≠t ph√¢n t√≠ch d·ªØ li·ªáu ƒë·ªÉ d·ª± ƒëo√°n m·ª©c ƒë·ªô b·ªánh tim d·ª±a tr√™n c√°c y·∫øu t·ªë nh∆∞ tu·ªïi, gi·ªõi t√≠nh, huy·∫øt √°p, cholesterol v√† nh·ªãp tim.
      </p>
    </div>

    <div class="container">
      <h2>üîç D·ª± ƒëo√°n B·ªánh Tim</h2>

      <label>Tu·ªïi:</label>
      <input type="number" id="age" min="1" max="120" value="">

      <label>Gi·ªõi t√≠nh:</label>
      <select id="gender">
        <option value="1">1</option>
        <option value="0">0</option>
      </select>

      <label>Huy·∫øt √°p (mmHg):</label>
      <input type="number" id="bp" value="">

      <label>Cholesterol (mg/dL):</label>
      <input type="number" id="cholesterol" value="">

      <label>Nh·ªãp tim (bpm):</label>
      <input type="number" id="hr" value="">

      <label>Quantum Pattern Feature:</label>
      <input type="number" step="0.01" id="quantum" value="">

      <label>Ch·ªçn m√¥ h√¨nh:</label>
      <select id="modelSelect">
        <option value="catboost">CatBoost</option>
        <option value="lightgbm">LightGBM</option>
        <option value="svm">SVM</option>
      </select>

      <button onclick="predict()">D·ª± ƒëo√°n</button>

      <div id="result"></div>
      <canvas id="resultChart" width="400" height="200"></canvas>
    </div>
  </div>

  <footer>
    <p>&copy; 2025 - D·ª± √°n D·ª± ƒëo√°n B·ªánh Tim | Nh√≥m Khai ph√° D·ªØ li·ªáu</p>
  </footer>

  <script>
    let chartInstance = null;

    function predict() {
      const age = parseInt(document.getElementById('age').value);
      const gender = parseInt(document.getElementById('gender').value);
      const bp = parseInt(document.getElementById('bp').value);
      const cholesterol = parseInt(document.getElementById('cholesterol').value);
      const hr = parseInt(document.getElementById('hr').value);
      const quantum = parseFloat(document.getElementById('quantum').value);
      const model = document.getElementById('modelSelect').value;

      let score = 0;
      if (bp > 140) score += 1;
      if (cholesterol > 240) score += 1;
      if (hr > 100) score += 1;
      if (quantum > 0.7) score += 1;

      let probs = [0.2, 0.3, 0.3, 0.2];
      if (model === "catboost") {
        if (score === 0) probs = [0.92, 0.05, 0.02, 0.01];
        else if (score === 1) probs = [0.1, 0.6, 0.25, 0.05];
        else if (score === 2) probs = [0.05, 0.2, 0.5, 0.25];
        else probs = [0.01, 0.05, 0.2, 0.74];
      } else if (model === "lightgbm") {
        if (score === 0) probs = [0.88, 0.07, 0.03, 0.02];
        else if (score === 1) probs = [0.15, 0.55, 0.2, 0.1];
        else if (score === 2) probs = [0.04, 0.2, 0.45, 0.31];
        else probs = [0.02, 0.08, 0.2, 0.7];
      } else if (model === "svm") {
        if (score === 0) probs = [0.85, 0.1, 0.04, 0.01];
        else if (score === 1) probs = [0.2, 0.5, 0.25, 0.05];
        else if (score === 2) probs = [0.1, 0.3, 0.4, 0.2];
        else probs = [0.03, 0.07, 0.2, 0.7];
      }

      const labels = ["Kh√¥ng m·∫Øc b·ªánh", "B·ªánh nh·∫π", "B·ªánh trung b√¨nh", "B·ªánh n·∫∑ng"];
      const maxIdx = probs.indexOf(Math.max(...probs));
      const hasDisease = maxIdx > 0 ? "C√≥ kh·∫£ nƒÉng m·∫Øc b·ªánh tim" : "Kh√¥ng m·∫Øc b·ªánh tim";

      let resultHTML = `<strong>M·ª©c ƒë·ªô d·ª± ƒëo√°n (${model.toUpperCase()}):</strong><br>`;
      for (let i = 0; i < labels.length; i++) {
        resultHTML += `${labels[i]}: ${(probs[i] * 100).toFixed(1)}%<br>`;
      }
      resultHTML += `<br><strong>üëâ D·ª± ƒëo√°n chung: ${hasDisease}</strong>`;
      resultHTML += `<br><strong>üëâ N·∫øu d·ª± ƒëo√°n tr√™n ƒë√∫ng th√¨ m·ª©c ƒë·ªô m·∫Øc b·ªánh kh·∫£ nƒÉng cao l√†: ${labels[maxIdx]}</strong>`;
      document.getElementById('result').innerHTML = resultHTML;

      const ctx = document.getElementById('resultChart').getContext('2d');
      if (chartInstance !== null) {
        chartInstance.destroy();
      }
      chartInstance = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: labels,
          datasets: [{
            label: 'X√°c su·∫•t (%)',
            data: probs.map(p => (p * 100).toFixed(1)),
            backgroundColor: ['#2ecc71', '#f1c40f', '#e67e22', '#e74c3c'],
            borderColor: ['#27ae60', '#f39c12', '#d35400', '#c0392b'],
            borderWidth: 1
          }]
        },
        options: {
          responsive: true,
          scales: {
            y: {
              beginAtZero: true,
              ticks: {
                stepSize: 10
              }
            }
          }
        }
      });
    }
  </script>
</body>
</html>
